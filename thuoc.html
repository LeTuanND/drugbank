<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv='cache-control' content='no-cache'> 
    <meta http-equiv='expires' content='0'> 
    <meta http-equiv='pragma' content='no-cache'> 
    
    <!-- header vs footer css-->
    <link rel="stylesheet" href="css/header-footer.css">

    <!-- Bootstrap 4 CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- Thu vien animate -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <!-- Khai bao fontawesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
    
    <link href='https://fonts.googleapis.com/css2?family=Chewy&family=Fira+Sans+Extra+Condensed&family=Asap+Condensed&family=Roboto+Condensed&family=Bungee+Inline&family=VT323&family=Fira+Sans+Extra+Condensed&family=IBM+Plex+Sans&family=Fira+Sans+Extra+Condensed&family=Bangers&family=Bungee+Inline&family=Asap&family=Pangolin&family=Francois+One&family=Cabin&family=Special+Elite&display=swap' rel="stylesheet">
    <!-- Thu vien jquery -->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- Bootstrap 4 js -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <!-- Thu vien wow js -->
    <script src="js/wow.min.js"></script>
    <title>Thuốc</title>
<!-- 	<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css"> -->
	<link rel="stylesheet" type="text/css" href="css/thuoc-cskd.css">

	<style type="text/css">
		#anh-nen {
            background-image: url('background.jpg'); 
            height: 200px; 
            background-repeat: no-repeat;
            background-size: cover;
        }
	</style>
</head>
<body>

	<!-- head-->
	<div class="container" >

		<div class="row" style="margin: 10px 0px">
			<div class="col-3" style="padding-left: 0px;">
				<img src="logo-left.png">
			</div>
			<div class="col-5" style="margin-top: 5px; padding-left: 0px;">
				<img style="float: left; margin-right: 5px" src="logo_right.png">
				<span style="font-size: 17px;">BỘ Y TẾ </span> <br>
				<span style="font-size: 27px;">CỤC QUẢN LÝ DƯỢC </span>
			</div>
		</div>
    </div>
		
    <div class="container-fluid" style="background-color: #0f2f4f;">
        <div class="container">
            <div class="row" style=" color: hsla(0,0%,100%,.5);  padding-top: 5px; padding-bottom: 5px;margin-left: -3px;" >

                <div class="col-6">
                    <div class="row justify-content-start">
                        <ul class="nav">
                          <li class="nav-item">
                            <i class="fa fa-home"></i>
                            <a class="nav-link" href="home.html">TRANG CHỦ</a>
                          </li>
                          <li class="nav-item">
                            <i class="fas fa-capsules"></i>
                            <a class="nav-link" href="thuoc.html?page=1">THUỐC</a>
                          </li>
                          <li class="nav-item">
                            <i class="fa fa-briefcase-medical"></i>
                            <a class="nav-link" href="cskd.html?page=1">CƠ SỞ KINH DOANH</a>
                          </li>
                          
                        </ul>
                    </div>
                </div>

                <div class="col-6">
                    <div class="row justify-content-end">
                        <span id="info-admin"></span>
                        <ul class="nav">
                          <li class="nav-item">
                            <a class="nav-link" href="login.html">ĐĂNG NHẬP</a>
                          </li>
                        </ul>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
	<div id="anh-nen">
    </div>

	<!-- body-->
	<div class="bg-head"> 	
	<div class="text-center" style="background-color: #0f2f4f  height: 25px">
		<p class="text-center"> DANH MỤC THUỐC</p>
	</div>
	</div>
	<div class="tab">
		<table class="table table-striped table-bordered">
			<thead>
				<tr>
					<th style="width: 8%">Số đăng kí</th>
					
					<th style="width: 13%">Tên thuốc</th>
					<th>Hoạt chất</th>
					<th style="width: 30%">Công ty sản xuất</th>
					<th style="width: 5%">
					 <a href="info-thuoc.html" class="btn btn-primary" id="xem1">Xem</a>
                  </div>
					</th>
				</tr>
			</thead>
			<tbody id="bodythuoc">
				
			</tbody>
		</table>
	</div>

	<!-- phân trang -->
	<ul class="pagination justify-content-center">
        <li class="page-item pre "><a class="page-link" href="#">Trước</a></li>
        <li class="page-item "><a class="page-link numpage" id="truoc" href="#">1</a></li>
        <li class="page-item "><a class="page-link numpage" id="giua" href="#">2</a></li>
        <li class="page-item "><a class="page-link numpage" id="sau" href="#">3</a></li>
        <li class="page-item next"><a class="page-link" href="#">Sau</a></li>
    </ul>
	
	
	<!-- footer -->
    <div class="container-fluid footer" style="background-color: #17a2b8; height: 100px; text-align: center;">
        <div>Ngân hàng dữ liệu ngành dược</div>
        <div><b>Bản quyền: </b> Cục Quản lý Dược - Bộ Y tế</div>
    </div>


	<script type="text/javascript">

        //lấy giá trị page
        var getUrlParameter = function getUrlParameter(sParam) {
            var sPageURL = window.location.search.substring(1),
                sURLVariables = sPageURL.split('&'),
                sParameterName,
                i;
         
            for (i = 0; i < sURLVariables.length; i++) {
                sParameterName = sURLVariables[i].split('=');
            
                if (sParameterName[0] === sParam) {
                    return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
                }
            }
        };
        var pagePT = getUrlParameter('page');

		$(document).ready(function() {

            //lấy danh sách các thuốc
			$.ajax({
                url : 'module/function/thuoc.php',
                type : 'post',
                dataType : 'json',
                data : {
                    page : pagePT
                },
                success : function (result){
                    var html = '';

                    // Vì kết quả trả về dạng JSON nên ta lặp để lấy kết quả
                    $.each(result, function (key, item){
                        html += '<tr>';
                        html += '<td>' + item.so_dki + "</td>";
                        html += '<td id = "thuoc">' + item.ten_thuoc + "</td>";
                        html += '<td>' + item.hoat_chat + "</td>";
                        html += '<td>' + item.cty + "</td>";
                        html += '<td><button style="text-align: center;" class="btn btn-primary">Xem</button></td></tr>'
                    });
                      
                    // Gán nội dung html vào thẻ content
                    $('#bodythuoc').html(html);
                    
                },
                error : function (result) {
                    alert("lỗi");
                }
            });
            
            $.ajax({
                url : 'module/function/count-thuoc.php',
                type : 'post',
                dataType : 'text',
                success : function (result){
                    var count  = result;
                    if (pagePT.toString() == "1") {
                        $('.pagination .pre').addClass('disabled');

                        $('#giua').text("2");
                        $('#truoc').text("1");
                        $('#sau').text("3");

                        $('#truoc').parent().addClass('active');
                    }else if (pagePT.toString() == count) {
                        $('.pagination .next').addClass('disabled');
                        var giua = new Number(pagePT) - 1;
                        var truoc = new Number(pagePT) - 2;

                        $('#giua').text(giua.toString());
                        $('#sau').text(pagePT.toString());
                        $('#truoc').text(truoc.toString());

                        $('#sau').parent().addClass('active');
                    } else {
                        var truoc = new Number(pagePT) - 1;
                        var sau = new Number(pagePT) + 1;
                        $('#truoc').text(truoc.toString());
                        $('#giua').text(pagePT.toString());
                        $('#sau').text(sau.toString());

                        $('#giua').parent().addClass('active');
                    }
                    
                },
                error : function (result) {
                    alert("lỗi");
                }
            });

            var pre = Number(pagePT) - 1;
            $('.pagination .pre a').attr('href', '?page=' + pre.toString());

            var next = Number(pagePT) + 1; 
            $('.pagination .next a').attr('href', '?page=' + next.toString());

		});

        $("body").on("click", ".pagination .page-item .numpage", function(){
            var trang = $(this).text();
            $(this).attr('href', '?page=' + trang);
        });
        
		//xử lý sự kiện click button xem
		$("body").on("click", "#bodythuoc tr td button", function(){
            var thuoc = $(this).parent().parent().children('#thuoc').text();
            location.assign("info-thuoc.html?thuoc=" + thuoc);
        });
		
	</script>	

</body>
</html>